<html>
<head>
    <title>Base Calculator</title>
    <script type="text/javascript" src='http://code.jquery.com/jquery-latest.js'></script>
    <script type="text/javascript">
        window.jQuery || document.write("<script src='../../js/jquery.js'><" + "/script>")
    </script>
    <script type="text/javascript" src='placevalue.js'></script>
    <style>
        body,input { font-family:"Arial Unicode MS"}
        table { border-spacing: 0; float: left; margin: 10px; }
        .line td { border-bottom: 1pt solid black; }
        input { text-align: right; }
    </style>
</head>
<body>
    <button onclick="calcgui()">Calculate</button>
    <br />
    <br />
    <table>
        <tr><td></td><td><input id='a' value='1' /></td></tr>
        <tr class="line"><td><select><option>+</option><option>-</option><option>x</option><option>/</option><option>⊗</option><option>⊘</option><option>⊖</option></select></td><td><input id='b' value='11' onchange="$(this).removeAttr('data-val')"></td><td><button onclick="moveanswer('#b','#a')">↑</button></td></tr>
        <tr><td><button onclick="calcgui()">=</button></td><td><input id='c' /></td><td><button onclick="moveanswer('#c','#b')">↑</button></td></tr>
    </table>
    <script type="text/javascript">
        function moveanswer(from, to) {
            var a = $(from).attr('data-val')
            $(to).attr('data-val', a);
            $(to).val(new placevalue(a));
        }
        function calcgui() {                      // 1 Call by index.html
            var num = $('#a').val();
            var den = $('#b').val();
            var answer = $('select').val() == '+' ? addprimative(num, den) : $('select').val() == '-' ? subprimative(num, den) : $('select').val() == 'x' ? timesprimative(num, den) : $('select').val() == '/' ? divideprimative(num, den) : $('select').val() == '⊗' ? pointtimesprimative(num, den) : $('select').val() == '⊘' ? pointdivideprimative(num, den) : pointsubprimative(num, den);
            var a = answer.toString()
            $('#c').attr('data-val', JSON.stringify(answer));
            $('#c').val(a);
            function addprimative(addend, arg2) {
                if ($('#b').attr('data-val')) arg2 = $('#b').attr('data-val');
                return new placevalue(addend).add(new placevalue(arg2));
            }
            function subprimative(addend, arg2) {
                if ($('#b').attr('data-val')) arg2 = $('#b').attr('data-val');
                return new placevalue(addend).sub(new placevalue(arg2));
            }
            function timesprimative(num, arg2) {
                if ($('#b').attr('data-val')) arg2 = $('#b').attr('data-val');
                return new placevalue(arg2).times(new placevalue(num));
            }
            function divideprimative(num, arg2) {
                if ($('#b').attr('data-val')) arg2 = $('#b').attr('data-val');
                return new placevalue(num).divide(new placevalue(arg2));
            }
            function pointtimesprimative(num, arg2) {
                if ($('#b').attr('data-val')) arg2 = $('#b').attr('data-val');
                return new placevalue(num).pointtimes(new placevalue(arg2));
            }
            function pointdivideprimative(num, arg2) {
                if ($('#b').attr('data-val')) arg2 = $('#b').attr('data-val');
                return new placevalue(num).pointdivide(new placevalue(arg2));
            }
            function pointsubprimative(num, arg2) {
                if ($('#b').attr('data-val')) arg2 = $('#b').attr('data-val');
                return new placevalue(num).pointsub(new placevalue(arg2));
            }
        }
    </script>
</body>
</html>
