
<!--
   Author : Anthony John Ripa
   Date : 3/31/2017
   Demo for PlaceValue : a datatype for representing base agnostic arithmetic via numbers whose digits are real
-->

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>PlaceValue Calculator</title>
    <script type="text/javascript" src='https://code.jquery.com/jquery-latest.js'></script>
    <script type="text/javascript">
        window.jQuery || document.write("<script src='../../js/jquery.js'><" + "/script>")
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/1.7.0/math.min.js"></script>
    <script type="text/javascript">
        window.math || document.write("<script src='../../js/math.js'><" + "/script>")
    </script>
    <script type="text/javascript" src='rational.js'></script>
    <script type="text/javascript" src='complex.js'></script>
    <script type="text/javascript" src='complexlaurent.js'></script>
    <script type="text/javascript" src='wholeplacevaluecomplex.js'></script>
    <script type="text/javascript" src='placevaluecomplex.js'></script>
    <script type="text/javascript" src='fourier.js'></script>
    <script type="text/javascript" src='wholeplacevaluecomplex2.js'></script>
    <script type="text/javascript" src='complexplacevalue.js'></script>
    <script type="text/javascript" src='complexexponential.js'></script>
    <script type="text/javascript" src='fourier2.js'></script>
    <script type="text/javascript" src='wholeplacevalue.js'></script>
    <script type="text/javascript" src='placevalue.js'></script>
    <script type="text/javascript" src='polynomial.js'></script>
    <script type="text/javascript" src='laurent.js'></script>
    <script src='wholeplacevalue2.js'></script>
    <script src='multinomial.js'></script>
    <script src='placevalue2.js'></script>
    <script src='laurent2.js'></script>
    <script src='exponential.js'></script>
    <script src='sparseplacevalue.js'></script>
    <script src='sparseplacevalue1.js'></script>
    <script src='sparsepolynomial.js'></script>
    <script src='placevalueratio.js'></script>
    <script src='polynomialratio.js'></script>
    <script src='sparseplacevalue2.js'></script>
    <script src='sparsemultinomial.js'></script>
    <script src='sparseplacevaluecomplex.js'></script>
    <style>
        h1 { text-align: center; }
        #f { position: absolute; top: 10px; left: 10px; }
        body, input { font-family: "Arial Unicode MS" }
        #main { border-spacing: 0; float: left; margin: 10px; }
        #col3 { width: 150px }
        #ao, #bo, #co { min-width: 150px; text-align: right }
        #augend:nth-child(1) td { color: green; }
        #base>td { border-bottom: 1pt solid black; color: blue; }
        #base>td table { color: blue; }
        input { text-align: right; }
    </style>
</head>
<body>
    <h1>PlaceValue Calculator</h1>
    <select id='f' onchange="clean()">
        <optgroup label="Primitives">
            <option>Rational</option>
        </optgroup>
        <optgroup label="PlaceValues">
            <option>WholePlaceValue</option>
            <option>PlaceValue</option>
            <option>PlaceValueRatio</option>
            <option>SparsePlaceValue</option>
            <option>SparsePlaceValue1</option>
            <option>SparsePlaceValue2</option>
            <option>WholePlaceValueComplex</option>
            <option>PlaceValueComplex</option>
            <option>SparsePlaceValueComplex</option>
        </optgroup>
        <optgroup label="Applications">
            <option>Polynomial</option>
            <option>Polynomial Ratio</option>
            <option>Sparse Polynomial</option>
            <option>Laurent Polynomial</option>
            <option>Multinomial</option>
            <option>Laurent Multinomial</option>
            <option>Sparse Multinomial</option>
            <option>Complex Laurent</option>
            <option>Exponential</option>
            <option>Fourier</option>
            <option>Fourier2</option>
            <option>Complex Exponential</option>
        </optgroup>
    </select>
    <table id="main">
        <tr id="augend"><td></td><td><input id='a' value='1' onchange="$(this).removeAttr('data-val')" /></td><td id="col3"></td><td id="ao"></td></tr>
        <tr id="base"><td><select id='op'><option selected>+</option><option>-</option><option>x</option><option>/</option><option>\</option><option>&divide;</option><option>^</option><option>|</option><option>&otimes;</option><option>&#8856;</option><option>&#8854;</option><option>&oplus;</option><option>&#9853;</option></select></td><td><input id='b' value='11' onchange="$(this).removeAttr('data-val')"></td><td><button onclick="moveanswer('#b','#a')">&uarr;</button></td><td id="bo">&nbsp;</td></tr>
        <tr><td><button onclick="compute()">=</button></td><td><input id='c' /></td><td><button onclick="moveanswer('#c','#b')">&uarr;</button></td><td id="co"></td></tr>
    </table>
    <script type="text/javascript">
        function compute() {
            f = [rational, wholeplacevalue, placevalue, placevalueratio, sparseplacevalue, sparseplacevalue1, sparseplacevalue2, wholeplacevaluecomplex, placevaluecomplex, sparseplacevaluecomplex, polynomial, polynomialratio, sparsepolynomial, laurent, multinomial, laurent2, sparsemultinomial, complexlaurent, exponential, fourier, fourier2, complexexponential][$('#f')[0].selectedIndex];
            var a = getinput('#a');
            var b = getinput('#b');
            var c = [a.add, a.sub, a.times, a.divide, a.divideleft, a.dividemiddle, a.pow, a.eval, a.pointtimes, a.pointdivide, a.pointsub, a.pointadd, a.pointpow][$('#op')[0].selectedIndex].call(a, b);
            output(a, b, c);
            function getinput(elem) { var a = $(elem).attr('data-val') || $(elem).val(); return f.parse(a); }
            function output(a, b, c) {
                $('#c').attr('data-val', JSON.stringify(c));
                $('#c').val(c);
                showInternal(a, '#ao');
                showInternal(b, '#bo');
                showInternal(c, '#co');
                function showInternal(pv, elem) { $(elem).html(pv.tohtml()); }
            }
            eval();
        }
        function moveanswer(from, to) {
            $(to).val($(from).val());                           // move toString
            $(to + 'o').html($(from + 'o').html());             // move toStringInternal
            $(to).attr('data-val', $(from).attr('data-val'));   // move json
        }
        function clean() {
            $('input').val('');
            $('td:nth-child(4)').html('&nbsp;');
            $('[data-val]').removeAttr('data-val');
        }
    </script>
</body>
</html>
